<!--<h2>{{ 'dispensingPatients.title' | message }}</h2>-->
<h2 ng-if="vm.orderingFacility">{{'dispensingPatients.fulfillOrdersAt' | message: {'facility':  vm.orderingFacility.name} }}</h2>
<h2 ng-if="!vm.orderingFacility">Patients</h2>

<form class="sidebar" ng-submit="vm.searchPatients()">
  <label for="orderingFacility">{{'dispensingPatients.patientNumber' | message}}</label>
  <input class="form-control" type="text" style="width: 150px;" ng-model="vm.patientParams.patientNumber">
  <label>Last Name</label>
  <input class="form-control" type="text" style="width: 150px;" ng-model="vm.patientParams.lastName">
  <label>First Name</label>
  <input class="form-control" type="text" style="width: 150px;" ng-model="vm.patientParams.firstName">
  <label>Nation ID Number</label>
  <input class="form-control" type="text" style="width: 150px;" ng-model="vm.patientParams.nationalId">
  <label>Date of Birth</label>
  <input id="dateOfBirth" type="date" style="width: 90px;" ng-model="vm.patientParams.dateOfBirth"
   max-date="vm.maxDate" inputmode="none"/>
  <label>Contact Number</label>
  <input class="form-control" value="+266 " type="text" style="width: 150px;" ng-model="vm.patientParams.contactNumber">
  <input type="submit" class="btn btn-primary" value="{{'dispensingPatients.search' | message}}"/>

</form>

<section class="openlmis-table-container">
  <openlmis-sort options="vm.options"/>
  <section class="is-primary">
    <form class="form-inline" name="productForm"> <!-- ng-submit="vm.addProduct()"-->
        <button type="button" ng-click="vm.addPatientForm()" class="add">Add Patient</button> <!--ui-sref="openlmis.dispensing.add.patient.form"-->
    </form>
  </section>
  <table>
    <caption ng-if="!vm.orders.length">{{'dispensingPatients.noOrdersFound' | message}}</caption>
    <thead>
    <tr>
      <th>Patient Number</th>
      <th>Last Name</th>
      <th>First Name</th>
      <th>Nation ID Number</th>
      <th>Date of Birth</th>
      <th>Contact Number</th>
      <th>{{'dispensingPatients.createdDate' | message}}</th>
      <th class="col-sticky sticky-right">{{'dispensingPatients.actions' | message}}</th>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat="patient in vm.patientsData">
      
      <td>{{patient.patientNumber}}</td>
      <td>{{patient.personDto.lastName}}</td>
      <td>{{patient.personDto.firstName}}</td>
      <td>{{patient.personDto.nationalId}}</td>
      <td>{{patient.personDto.dateOfBirth}}</td>
      <td>{{patient.personDto.contacts[0].contactValue}}</td>
      <td>{{patient.registrationDate | openlmisDate}}</td>
      <td>
        <button ng-if="order.isFulfilling()" ui-sref="openlmis.orders.shipmentView({id: order.id})">
          {{'dispensingPatients.continueFulfillment' | message}}
        </button>
        <button ng-if="!order.isFulfilling()" ui-sref="openlmis.orders.shipmentView({id: order.id})">
          {{'dispensingPatients.startFulfillment' | message}}
        </button>
      </td>
    </tr>
    </tbody>
  </table>
  <openlmis-pagination/>
</section>